{"ast":null,"code":"var _jsxFileName = \"/Users/anishumar/Desktop/react-firebase-chat/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport './App.css';\nimport React, { useState, useRef, useEffect } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithPopup, signOut as firebaseSignOut } from 'firebase/auth';\nimport { GoogleAuthProvider } from 'firebase/auth';\nimport { getFirestore, collection, query, orderBy, addDoc, serverTimestamp } from 'firebase/firestore';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\n\n// Firebase configuration\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD7K1pgnmYOsvZNZ2NrXXa1u4gfVl2ltF0\",\n  authDomain: \"superchat-bfdc0.firebaseapp.com\",\n  projectId: \"superchat-bfdc0\",\n  storageBucket: \"superchat-bfdc0.appspot.com\",\n  messagingSenderId: \"1036790184900\",\n  appId: \"1:1036790184900:web:b5da3e19005c2bcada0291\",\n  measurementId: \"G-N12164VTE2\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst firestore = getFirestore(app);\nfunction App() {\n  _s();\n  const [user] = useAuthState(auth);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: /*#__PURE__*/_jsxDEV(SignOut, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      children: user ? /*#__PURE__*/_jsxDEV(ChatRoom, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(SignIn, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 32\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"hP/7NvzUIXfxIpRVjMlmHSnysKo=\", false, function () {\n  return [useAuthState];\n});\n_c = App;\nfunction SignIn() {\n  const signInWithGoogle = () => {\n    const provider = new GoogleAuthProvider();\n    signInWithPopup(auth, provider);\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: signInWithGoogle,\n    children: \"Sign in with Google\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_c2 = SignIn;\nfunction SignOut() {\n  return auth.currentUser && /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: () => firebaseSignOut(auth),\n    children: \"Sign Out\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_c3 = SignOut;\nfunction ChatRoom() {\n  _s2();\n  const dummy = useRef();\n  const messagesRef = collection(firestore, 'messages');\n  const q = query(messagesRef, orderBy('createdAt'));\n  const [messages] = useCollectionData(q, {\n    idField: 'id'\n  });\n  const [formValue, setFormValue] = useState('');\n  useEffect(() => {\n    var _dummy$current;\n    (_dummy$current = dummy.current) === null || _dummy$current === void 0 ? void 0 : _dummy$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const sendMessage = async e => {\n    e.preventDefault();\n    const {\n      uid,\n      photoURL\n    } = auth.currentUser;\n    await addDoc(messagesRef, {\n      text: formValue,\n      createdAt: serverTimestamp(),\n      uid,\n      photoURL\n    });\n    setFormValue('');\n    dummy.current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      children: [messages && messages.map(msg => /*#__PURE__*/_jsxDEV(ChatMessage, {\n        message: msg\n      }, msg.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 42\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: dummy\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: formValue,\n        onChange: e => setFormValue(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s2(ChatRoom, \"w/omJkpymRsWwV2v3tuh5N/YjmU=\", false, function () {\n  return [useCollectionData];\n});\n_c4 = ChatRoom;\nfunction ChatMessage(props) {\n  const {\n    text,\n    uid,\n    photoURL\n  } = props.message;\n  const messageClass = uid === auth.currentUser.uid ? 'sent' : 'received';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `message ${messageClass}`,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: photoURL,\n      alt: \"Avatar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n}\n_c5 = ChatMessage;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"SignIn\");\n$RefreshReg$(_c3, \"SignOut\");\n$RefreshReg$(_c4, \"ChatRoom\");\n$RefreshReg$(_c5, \"ChatMessage\");","map":{"version":3,"names":["React","useState","useRef","useEffect","initializeApp","getAuth","signInWithPopup","signOut","firebaseSignOut","GoogleAuthProvider","getFirestore","collection","query","orderBy","addDoc","serverTimestamp","useAuthState","useCollectionData","jsxDEV","_jsxDEV","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","firestore","App","_s","user","className","children","SignOut","fileName","_jsxFileName","lineNumber","columnNumber","ChatRoom","SignIn","_c","signInWithGoogle","provider","onClick","_c2","currentUser","_c3","_s2","dummy","messagesRef","q","messages","idField","formValue","setFormValue","_dummy$current","current","scrollIntoView","behavior","sendMessage","e","preventDefault","uid","photoURL","text","createdAt","map","msg","ChatMessage","message","id","ref","onSubmit","value","onChange","target","type","_c4","props","messageClass","src","alt","_c5","$RefreshReg$"],"sources":["/Users/anishumar/Desktop/react-firebase-chat/src/App.js"],"sourcesContent":["import './App.css';\nimport React, { useState, useRef, useEffect } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithPopup, signOut as firebaseSignOut } from 'firebase/auth';\nimport { GoogleAuthProvider } from 'firebase/auth';\nimport { getFirestore, collection, query, orderBy, addDoc, serverTimestamp } from 'firebase/firestore';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\n\n// Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD7K1pgnmYOsvZNZ2NrXXa1u4gfVl2ltF0\",\n  authDomain: \"superchat-bfdc0.firebaseapp.com\",\n  projectId: \"superchat-bfdc0\",\n  storageBucket: \"superchat-bfdc0.appspot.com\",\n  messagingSenderId: \"1036790184900\",\n  appId: \"1:1036790184900:web:b5da3e19005c2bcada0291\",\n  measurementId: \"G-N12164VTE2\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst firestore = getFirestore(app);\n\nfunction App() {\n  const [user] = useAuthState(auth);\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <SignOut />\n      </header>\n\n      <section>\n        {user ? <ChatRoom /> : <SignIn />}\n      </section>\n    </div>\n  );\n}\n\nfunction SignIn() {\n  const signInWithGoogle = () => {\n    const provider = new GoogleAuthProvider();\n    signInWithPopup(auth, provider);\n  };\n\n  return (\n    <button onClick={signInWithGoogle}>Sign in with Google</button>\n  );\n}\n\nfunction SignOut() {\n  return auth.currentUser && (\n    <button onClick={() => firebaseSignOut(auth)}>Sign Out</button>\n  );\n}\n\nfunction ChatRoom() {\n  const dummy = useRef();\n  const messagesRef = collection(firestore, 'messages');\n  const q = query(messagesRef, orderBy('createdAt'));\n  const [messages] = useCollectionData(q, { idField: 'id' });\n  const [formValue, setFormValue] = useState('');\n\n  useEffect(() => {\n    dummy.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const sendMessage = async (e) => {\n    e.preventDefault();\n    const { uid, photoURL } = auth.currentUser;\n\n    await addDoc(messagesRef, {\n      text: formValue,\n      createdAt: serverTimestamp(),\n      uid,\n      photoURL\n    });\n\n    setFormValue('');\n    dummy.current.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  return (\n    <>\n      <main>\n        {messages && messages.map(msg => <ChatMessage key={msg.id} message={msg} />)}\n        <div ref={dummy}></div>\n      </main>\n\n      <form onSubmit={sendMessage}>\n        <input value={formValue} onChange={(e) => setFormValue(e.target.value)} />\n        <button type=\"submit\">Send</button>\n      </form>\n    </>\n  );\n}\n\nfunction ChatMessage(props) {\n  const { text, uid, photoURL } = props.message;\n  const messageClass = uid === auth.currentUser.uid ? 'sent' : 'received';\n\n  return (\n    <div className={`message ${messageClass}`}>\n      <img src={photoURL} alt=\"Avatar\" />\n      <p>{text}</p>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}